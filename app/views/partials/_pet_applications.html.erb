<div class="card">
  <div class="card-header">
    <!-- MARK: from applications reviews would pass pet and from pet show would pass nil -->
    <% if pet %>
      <h4 class="mb-0 text-center">
        <%= link_to pet.name, pet_path(pet), class: 'text-decoration-none' %>
      </h4>
    <% else %>
      <h4 class="mb-0">Applications</h4>
    <% end %>
  </div>
  <div class="card-body table-responsive">
    <table class="table mb-0 text-nowrap table-hover table-centered">
      <thead>
        <tr>
          <th scope="col">Applicant</th>
          <th scope="col">Profile</th>
          <th scope="col">Edit</th>
          <th scope="col">Status</th>
          <th scope="col">New Adoption</th>
        </tr>
      </thead>
      <tbody>
        <% applications.each do |app|%>
          <tr>
            <!-- applicant -->
            <td class="align-middle">
                <%= app.applicant_name %>
            </td>
            <!-- profile -->
            <td class="align-middle">
              <% unless app.status == 'successful_applicant' %>
                <%= link_to 'Adopter Profile', 
                    profile_review_path(app.adopter_account.adopter_profile.id) %>
              <% end %>
            </td>
            <!-- edit -->
            <td class="align-middle">
              <%= link_to 'Edit Application', 
                  edit_adoption_application_review_path(app.id),
                  class: 'btn btn-outline-dark mt-3 mt-md-0 mb-3 mb-md-0' %>
            </td>
            <!-- status -->
            <td class="align-middle <%= 'fw-bold' if app.status == 'withdrawn' %>">
              <span class="badge <%= app.status == 'withdrawn' ? 'bg-warning text-dark' : 'bg-gray-700' %>">
                <%= app.status.titleize %>
              </span>
            </td>
            <!-- create --> 
            <td class="align-middle">
              <% if app.status == 'successful_applicant' %>
                <!--create adoption button-->
                  <%= link_to 'Create Adoption', 
                              create_adoption_path(pet_id: app.pet.id, 
                                                  adopter_account_id: app.adopter_account.id),
                              data: { turbo_method: :post, 
                                      turbo_confirm: "Click OK to finalize this adoption." },
                              class: '' %>
              
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
